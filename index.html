<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trading Journal</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="manifest" href="manifest.json" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <!-- ðŸ”´ Ticker and Dark Mode -->
  <header class="ticker">
    <div id="ticker-scroll">Loading market data...</div>
    <button id="refreshPrices">Refresh Prices</button>
    <button id="darkToggle">ðŸŒ™ Toggle Dark Mode</button>
    <button id="resetPrices">Reset Prices</button>
  </header>
  <!-- ðŸ”µ Sidebar Navigation -->
  <aside class="sidebar">
    <h1>ðŸ“Š Trading Journal</h1>
    <nav>
      <ul>
        <li data-target="" class="active">Dashboard</li>
        <li data-target="portfolio" class="switchable">Portfolio</li>
        <li data-target="trades-table" class="switchable">Trades</li>
        <li data-target="alerts" class="switchable">Alerts</li>
        <li data-target="greeks-calculator" class="switchable">Greeks Calculator</li>
        <li data-target="settings" class="switchable">Settings</li>
      </ul>
    </nav>
  </aside>
  <!-- ðŸŸ¡ Main Dashboard -->
  <main class="dashboard">
    <!-- Portfolio Overview -->
    <section id="portfolio" class="switchable">
      <h2>Portfolio Overview</h2>
      <div id="portfolio-summary"></div>
    </section>
    <!-- Trades Table -->
    <section id="trades-table" class="switchable" style="display:none;">
      <h2>Trades</h2>
      <div class="csv-controls">
        <button id="exportCSV">Download CSV</button>
        <button id="exportFiltered">Export Filtered Trades</button>
        <input type="file" id="importCSV" accept=".csv" />
      </div>
      <div class="filter-controls">
        <label for="brokerFilter">Broker:</label>
        <select id="brokerFilter">
          <option value="all">All</option>
          <option value="Etrade">Etrade</option>
          <option value="Schwab">Schwab</option>
          <option value="Fidelity">Fidelity</option>
          <option value="Webull">Webull</option>
          <option value="Robinhood">Robinhood</option>
        </select>
        <label for="symbolSearch">Symbol:</label>
        <input type="text" id="symbolSearch" placeholder="e.g. AAPL" />
        <label for="tagFilter">Tag:</label>
        <input type="text" id="tagFilter" placeholder="e.g. swing" />
        <label for="startDate">Start:</label>
        <input type="date" id="startDate" />
        <label for="endDate">End:</label>
        <input type="date" id="endDate" />
      </div>
      <div id="dropZone">ðŸ“‚ Drag & drop CSV file here</div>
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Symbol</th>
              <th>Qty</th>
              <th>Entry</th>
              <th>Entry Date</th>
              <th>Exit</th>
              <th>Exit Date</th>
              <th>Multiplier</th>
              <th>Type</th>
              <th>Broker</th>
              <th class="current-price">Current Price</th>
              <th class="pl">P/L</th>
              <th>Notes</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="tradeRows"></tbody>
        </table>
      </div>
      <p id="tradeCount"></p>
      <div id="tradeSummary"></div>
    </section>
    <!-- Alerts -->
    <section id="alerts" class="switchable" style="display:none;">
      <h2>Alerts</h2>
      <form id="alertForm">
        <label>Symbol: <input type="text" id="alertSymbol" placeholder="e.g. AAPL" required></label>
        <label>Price Threshold: <input type="number" id="alertPrice" step="0.01" required></label>
        <label>Type:
          <select id="alertType">
            <option value="above">Above</option>
            <option value="below">Below</option>
          </select>
        </label>
        <button type="submit">Add Alert</button>
      </form>
      <h3>Recent Alerts</h3>
      <ul id="alertsList"></ul>
      <h3>Active Alerts</h3>
      <ul id="activeAlertsList"></ul>
    </section>
    <!-- Greeks Calculator -->
    <section id="greeks-calculator" class="switchable" style="display:none;">
      <h2>Options Greeks Calculator</h2>
      <form id="greeksForm">
        <label>Spot Price (S): <input type="number" id="spotPrice" step="0.01" required /></label>
        <label>Strike Price (K): <input type="number" id="strikePrice" step="0.01" required /></label>
        <label>Time to Expiration (T, in years): <input type="number" id="timeToExpiration" step="0.01" required /></label>
        <label>Risk-Free Rate (r): <input type="number" id="riskFreeRate" step="0.01" required /></label>
        <label>Volatility (Ïƒ): <input type="number" id="volatility" step="0.01" required /></label>
        <label>Option Type:
          <select id="optionType">
            <option value="call">Call</option>
            <option value="put">Put</option>
          </select>
        </label>
        <button type="submit">Calculate</button>
      </form>
      <div id="greeksResult"></div>
    </section>
    <!-- Settings -->
    <section id="settings" class="switchable" style="display:none;">
      <h2>Settings</h2>
      <label>
        <input type="checkbox" id="compactToggle" />
        Enable Compact Mode
      </label>
      <label>
        Alpha Vantage API Key (optional for Yahoo Finance):
        <input type="text" id="apiKeyInput" placeholder="Enter your API key" />
        <button id="saveApiKey">Save API Key</button>
      </label>
      <label>
        Polygon.io API Key (optional for enhanced dividends):
        <input type="text" id="polygonKeyInput" placeholder="Enter your Polygon key" />
        <button id="savePolygonKey">Save Polygon Key</button>
      </label>
      <p id="apiKeyStatus" style="color: var(--red);"></p>
      <h3>Manual Dividend Entry</h3>
      <form id="manualDividendForm">
        <label>Symbol: <input type="text" id="divSymbol" placeholder="e.g. AAPL" required pattern="[A-Z][A-Z0-9.\-]{0,9}" title="Valid symbol (Aâ€“Z, digits, dot, hyphen)"></label>
        <label>Dividend Rate: <input type="number" id="divRate" step="0.01" required></label>
        <label>Dividend Yield: <input type="number" id="divYield" step="0.01" required></label>
        <label>Ex-Dividend Date: <input type="date" id="exDivDate"></label>
        <label>Dividend Pay Date: <input type="date" id="divPayDate"></label>
        <button type="submit">Save Dividend Data</button>
      </form>
    </section>
    <!-- Equity Curve Chart -->
    <section class="equity-curve">
      <h2>Equity Curve</h2>
      <div class="chart-controls">
        <label for="chartType">Chart Type:</label>
        <select id="chartType">
          <option value="line">Line</option>
          <option value="bar">Bar</option>
        </select>
      </div>
      <canvas id="equityChart"></canvas>
    </section>
    <!-- Symbol Distribution Chart -->
    <section class="symbol-distribution">
      <h2>Symbol Distribution</h2>
      <canvas id="symbolChart"></canvas>
    </section>
    <!-- Broker Distribution Chart -->
    <section class="broker-distribution">
      <h2>Broker Distribution</h2>
      <canvas id="brokerChart"></canvas>
    </section>
    <!-- Risk Analytics -->
    <section class="risk-analytics">
      <h2>Risk Analytics</h2>
      <p>Max Drawdown: <span id="maxDrawdown">-5%</span></p>
      <p>Sharpe Ratio: <span id="sharpeRatio">1.5</span></p>
      <p>Win Rate: <span id="winRate">68%</span></p>
    </section>
    <!-- Profit / Loss Summary -->
    <section class="profit-loss">
      <h2>Profit / Loss Summary</h2>
      <div class="table-container">
        <table>
          <thead>
            <tr><th>Broker</th><th>Realized</th><th>Unrealized</th></tr>
          </thead>
          <tbody id="plRows"></tbody>
          <tfoot>
            <tr><td>Combined</td><td colspan="2" id="combinedPL"></td></tr>
          </tfoot>
        </table>
      </div>
    </section>
    <!-- ETF Dividend Summary Box -->
    <section class="etf-dividend-summary">
      <h2>ETF Dividend Summary</h2>
      <div class="etf-dividend-box">
        <p>Total Dividend Gain: <span id="totalEtfDividendGain"></span></p>
        <p>Average Dividend Yield: <span id="averageEtfDividendYield"></span></p>
        <p>Next Ex-Div Date: <span id="nextExDivDate"></span></p>
        <p>Next Pay Date: <span id="nextPayDate"></span></p>
        <table id="etfDividendTable">
          <thead>
            <tr>
              <th class="sortable" data-sort="symbol">Symbol</th>
              <th class="sortable" data-sort="dividendRate">Div. Rate</th>
              <th class="sortable" data-sort="gain">Gain</th>
              <th class="sortable" data-sort="dividendYield">Yield</th>
              <th class="sortable" data-sort="exDividendDate">Ex-Div</th>
              <th class="sortable" data-sort="dividendDate">Pay Date</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="etfDividendRows"></tbody>
        </table>
      </div>
    </section>
    <!-- Dividend Yield Chart -->
    <section class="dividend-yield-chart">
      <h2>Dividend Yield Distribution</h2>
      <canvas id="dividendYieldChart"></canvas>
    </section>
    <!-- Add / Edit Trade Form -->
    <section class="trade-entry">
      <h2>Add / Edit Trade</h2>
      <form id="tradeForm">
        <label>Symbol: <input type="text" name="symbol" required pattern="[A-Z][A-Z0-9.\-]{0,9}" title="Enter a valid stock symbol (uppercase letters, digits, dot, hyphen)" /></label>
        <label>Qty: <input type="number" name="qty" step="0.01" required /></label>
        <label>Entry Price: <input type="number" name="entry" step="0.01" required /></label>
        <label>Entry Date: <input type="date" name="date" required /></label>
        <label>Exit Price: <input type="number" name="exit" step="0.01" /></label>
        <label>Exit Date: <input type="date" name="exitDate" /></label>
        <label>Multiplier (Options only): <input type="number" name="multiplier" value="100" /></label>
        <label>Type:
          <select name="type">
            <option value="stock">Stock</option>
            <option value="option">Option</option>
            <option value="crypto">Crypto</option>
            <option value="etf">ETF</option>
          </select>
        </label>
        <label>Broker:
          <select name="broker">
            <option value="Etrade">Etrade</option>
            <option value="Schwab">Schwab</option>
            <option value="Fidelity">Fidelity</option>
            <option value="Webull">Webull</option>
            <option value="Robinhood">Robinhood</option>
          </select>
        </label>
        <label>Tags (comma-separated): <input type="text" name="tags" /></label>
        <label>Notes: <input type="text" name="notes" /></label>
        <button type="submit">Save Trade</button>
      </form>
    </section>
  </main>
  <!-- ðŸ§  App Logic -->
  <script src="script.js"></script>
</body>
</html>






















