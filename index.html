<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trading Journal</title>
  <link rel="stylesheet" href="./style.css" />
  <link rel="manifest" href="./manifest.json" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <!-- Fallback for loading issues -->
  <div id="loadError" style="display:none;color:red;text-align:center;padding:1em;">
    Failed to load the application. Please check your internet connection or refresh the page.
  </div>
  <!-- ðŸ”´ Ticker and Dark Mode -->
  <header class="ticker">
    <div id="ticker-scroll">Loading market data...</div>
    <button id="darkToggle">ðŸŒ™ Toggle Dark Mode</button>
  </header>
  <!-- ðŸ”µ Sidebar Navigation -->
  <aside class="sidebar">
    <h1>ðŸ“Š Trading Journal</h1>
    <nav>
      <ul>
        <li data-target="" class="active">Dashboard</li>
        <li data-target="portfolio" class="switchable">Portfolio</li>
        <li data-target="trades-table" class="switchable">Trades</li>
        <li data-target="alerts" class="switchable">Alerts</li>
        <li data-target="settings" class="switchable">Settings</li>
      </ul>
    </nav>
  </aside>
  <!-- ðŸŸ¡ Main Dashboard -->
  <main class="dashboard">
    <!-- Portfolio Overview -->
    <section id="portfolio" class="switchable">
      <h2>Portfolio Overview</h2>
      <div id="portfolio-summary"></div>
    </section>
    <!-- Trades Table -->
    <section id="trades-table" class="switchable" style="display:none;">
      <h2>Trades</h2>
      <div class="csv-controls">
        <button id="exportCSV">Download CSV</button>
        <button id="exportFiltered">Export Filtered Trades</button>
        <input type="file" id="importCSV" accept=".csv" />
      </div>
      <div class="filter-controls">
        <label for="brokerFilter">Broker:</label>
        <select id="brokerFilter">
          <option value="all">All</option>
          <option value="Etrade">Etrade</option>
          <option value="Schwab">Schwab</option>
          <option value="Fidelity">Fidelity</option>
          <option value="Webull">Webull</option>
          <option value="Robinhood">Robinhood</option>
        </select>
        <label for="symbolSearch">Symbol:</label>
        <input type="text" id="symbolSearch" placeholder="e.g. AAPL" />
        <label for="tagFilter">Tag:</label>
        <input type="text" id="tagFilter" placeholder="e.g. swing" />
        <label for="startDate">Start:</label>
        <input type="date" id="startDate" />
        <label for="endDate">End:</label>
        <input type="date" id="endDate" />
      </div>
      <div id="dropZone">ðŸ“‚ Drag & drop CSV file here</div>
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Symbol</th>
              <th>Qty</th>
              <th>Entry</th>
              <th>Entry Date</th>
              <th>Exit</th>
              <th>Exit Date</th>
              <th>Multiplier</th>
              <th>Strategy</th>
              <th>Broker</th>
              <th class="current-price">Current Price</th>
              <th class="pl">P/L</th>
              <th class="comments">Comments</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="tradeRows"></tbody>
        </table>
      </div>
      <p id="tradeCount"></p>
      <div id="tradeSummary"></div>
    </section>
    <!-- Alerts -->
    <section id="alerts" class="switchable" style="display:none;">
      <h2>Recent Alerts</h2>
      <ul id="alertsList">
        <li>AAPL | $150 | Above</li>
        <li>MSFT | $200 | Below</li>
      </ul>
    </section>
    <!-- Settings -->
    <section id="settings" class="switchable" style="display:none;">
      <h2>Settings</h2>
      <label>
        <input type="checkbox" id="compactToggle" />
        Enable Compact Mode
      </label>
      <label>
        Alpha Vantage API Key:
        <input type="text" id="apiKeyInput" placeholder="Enter your API key" />
      </label>
      <button id="saveApiKey">Save API Key</button>
      <p id="apiKeyStatus" style="display:none;"></p>
    </section>
    <!-- Equity Curve Chart -->
    <section class="equity-curve">
      <h2>Equity Curve</h2>
      <div id="chartError" style="display:none;color:red;">Failed to load Chart.js</div>
      <div class="chart-controls">
        <label for="chartType">Chart Type:</label>
        <select id="chartType">
          <option value="line">Line</option>
          <option value="bar">Bar</option>
        </select>
      </div>
      <canvas id="equityChart"></canvas>
    </section>
    <!-- Symbol Distribution Chart -->
    <section class="symbol-distribution">
      <h2>Symbol Distribution</h2>
      <canvas id="symbolChart"></canvas>
    </section>
    <!-- Broker Distribution Chart -->
    <section class="broker-distribution">
      <h2>Broker Distribution</h2>
      <canvas id="brokerChart"></canvas>
    </section>
    <!-- Risk Analytics -->
    <section class="risk-analytics">
      <h2>Risk Analytics</h2>
      <p>Win Rate: <span id="winRate">-</span></p>
      <p>Average P/L per Trade: <span id="avgPL">-</span></p>
      <p>Profit Factor: <span id="profitFactor">-</span></p>
      <p>Expectancy: <span id="expectancy">-</span></p>
    </section>
    <!-- Profit / Loss Summary -->
    <section class="profit-loss">
      <h2>Profit / Loss Summary</h2>
      <div class="table-container">
        <table>
          <thead>
            <tr><th>Broker</th><th>Realized</th><th>Unrealized</th></tr>
          </thead>
          <tbody id="plRows"></tbody>
          <tfoot>
            <tr><td>Combined</td><td colspan="2" id="combinedPL"></td></tr>
          </tfoot>
        </table>
      </div>
    </section>
    <!-- Add / Edit Trade Form -->
    <section class="trade-entry">
      <h2>Add / Edit Trade</h2>
      <form id="tradeForm">
        <label>Symbol: <input type="text" name="tradeSymbol" required /></label>
        <label>Qty: <input type="number" name="qty" required /></label>
        <label>Entry Price: <input type="number" name="entry" step="0.01" required /></label>
        <label>Entry Date: <input type="date" name="date" required /></label>
        <label>Exit Price: <input type="number" name="exit" step="0.01" /></label>
        <label>Exit Date: <input type="date" name="exitDate" /></label>
        <label>Multiplier (Options only): <input type="number" name="multiplier" value="100" /></label>
        <label>Strategy:
          <select name="strategy">
            <option value="Long Call">Long Call</option>
            <option value="Long Put">Long Put</option>
            <option value="Short Call">Short Call</option>
            <option value="Short Put">Short Put</option>
            <option value="Bull Call Spread">Bull Call Spread</option>
            <option value="Bear Put Spread">Bear Put Spread</option>
            <option value="Bull Put Spread">Bull Put Spread</option>
            <option value="Bear Call Spread">Bear Call Spread</option>
            <option value="Straddle">Straddle</option>
            <option value="Strangle">Strangle</option>
            <option value="Iron Condor">Iron Condor</option>
            <option value="Iron Butterfly">Iron Butterfly</option>
            <option value="Butterfly Spread">Butterfly Spread</option>
            <option value="Calendar Spread">Calendar Spread</option>
            <option value="Covered Call">Covered Call</option>
            <option value="Cash-Secured Put">Cash-Secured Put</option>
            <option value="Stock">Stock</option>
            <option value="Crypto">Crypto</option>
          </select>
        </label>
        <label>Broker:
          <select name="broker">
            <option value="Etrade">Etrade</option>
            <option value="Schwab">Schwab</option>
            <option value="Fidelity">Fidelity</option>
            <option value="Webull">Webull</option>
            <option value="Robinhood">Robinhood</option>
          </select>
        </label>
        <label>Tags (comma-separated): <input type="text" name="tags" /></label>
        <label>Comments: <input type="text" name="comments" /></label>
        <button type="submit">Save Trade</button>
      </form>
    </section>
  </main>
  <!-- ðŸ§  App Logic -->
  <script src="./script.js"></script>
</body>
</html>








